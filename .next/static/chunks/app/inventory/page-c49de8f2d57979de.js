(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{31498:(e,t,a)=>{Promise.resolve().then(a.bind(a,49448)),Promise.resolve().then(a.t.bind(a,6874,23))},49448:(e,t,a)=>{"use strict";a.d(t,{ProductsTable:()=>y});var s=a(95155),l=a(12115),r=a(49103),i=a(47924),c=a(44020),d=a(54416),n=a(29869),o=a(66474),x=a(34355),m=a(54861);function u(e){var t,a,r,i,c,u,g,h,p;let{onClose:y,categories:b,subCategories:j,reload:v,editProduct:f}=e,[N,w]=(0,l.useState)((null==f?void 0:f.name)||""),[S,_]=(0,l.useState)((null==f?void 0:f.description)||""),[C,k]=(0,l.useState)((null==f?void 0:f.price)?f.price.toString():""),[P,A]=(0,l.useState)((null==f||null==(t=f.meta_data)?void 0:t.slashed_price)||""),[I,F]=(0,l.useState)((null==f?void 0:f.availability_count)!==void 0?f.availability_count.toString():""),[O,J]=(0,l.useState)((null==f?void 0:f.category_id)||""),[D,E]=(0,l.useState)((null==f?void 0:f.subcategory_id)||""),[L,$]=(0,l.useState)(null==(h=null==f?void 0:f.is_active)||h),[M,G]=(0,l.useState)((null==f?void 0:f.image_url)||[]),[U,z]=(0,l.useState)((null!=(p=null==f||null==(a=f.image_url)?void 0:a.length)?p:0)>0),[V,R]=(0,l.useState)((null==f||null==(r=f.meta_data)?void 0:r["3d_image_urls"])?JSON.parse(f.meta_data["3d_image_urls"]):[]),[B,W]=(0,l.useState)((null==f||null==(i=f.meta_data)?void 0:i.variants)?JSON.parse(f.meta_data.variants):[]),[Q,T]=(0,l.useState)((null==f||null==(c=f.meta_data)?void 0:c.colors)?JSON.parse(f.meta_data.colors).map(e=>Object.values(e)[0]):[]),[Z,q]=(0,l.useState)((null==f||null==(u=f.meta_data)?void 0:u.colors)?JSON.parse(f.meta_data.colors).map(e=>Object.keys(e)[0]):[]),[H,K]=(0,l.useState)((null==f||null==(g=f.meta_data)?void 0:g.discount)||"");console.log(b,j),(0,l.useEffect)(()=>{if(f){var e,t,a,s,l,r,i,c,d;w(f.name||""),_(f.description||""),k(f.price?f.price.toString():""),A((null==(e=f.meta_data)?void 0:e.slashed_price)||""),F(void 0!==f.availability_count?f.availability_count.toString():""),J(f.category_id||""),E(f.subcategory_id||""),$(null==(c=f.is_active)||c),G(f.image_url||[]),z((null!=(d=null==(t=f.image_url)?void 0:t.length)?d:0)>0),R((null==(a=f.meta_data)?void 0:a["3d_image_urls"])?JSON.parse(f.meta_data["3d_image_urls"]):[]),W((null==(s=f.meta_data)?void 0:s.variants)?JSON.parse(f.meta_data.variants):[]),T((null==(l=f.meta_data)?void 0:l.colors)?JSON.parse(f.meta_data.colors).map(e=>Object.values(e)[0]):[]),q((null==(r=f.meta_data)?void 0:r.colors)?JSON.parse(f.meta_data.colors).map(e=>Object.keys(e)[0]):[]),K((null==(i=f.meta_data)?void 0:i.discount)||"")}},[f]);let X=async e=>{let t=e.target.files;if(t){let e=x.$.getInstance();G([...M,...await Promise.all(Array.from(t).map(async t=>(await e.uploadFile(t)).url))]),z(!0)}};Q.map((e,t)=>({[Z[t]||"Color ".concat(t+1)]:e}));let Y={"3d_image_urls":JSON.stringify(V),variants:JSON.stringify(B),colors:JSON.stringify(Q.map((e,t)=>({[Z[t]||"Color ".concat(t+1)]:e}))),slashed_price:P,discount:H},ee=async()=>{try{let e=x.$.getInstance(),t={name:N,description:S,price:parseFloat(C.replace(/,/g,"")),image_url:M,category_id:O,subcategory_id:D,meta_data:Y,is_active:L,availability_count:parseInt(I,10)};console.log("Product Data:",t),await e.createProduct(t),v(),alert("Product added successfully!"),y()}catch(e){console.error("Failed to add product:",e),alert("Failed to add product.")}},et=e=>{G(M.filter((t,a)=>a!==e))},ea=(e,t)=>{let a=[...B];a[e]=t,W(a)},es=(e,t,a)=>{let s=[...Q];if("color"===a)s[e]=t,T(s);else{let a=[...Z];a[e]=t,q(a)}},el=async()=>{try{let e=x.$.getInstance(),t={name:N,description:S,price:parseFloat(C.replace(/,/g,"")),image_url:M,category_id:O,subcategory_id:D,meta_data:Y,is_active:L,availability_count:parseInt(I,10)};f?(await e.updateProduct(f.id,t),alert("Product updated successfully!")):(await e.createProduct(t),alert("Product added successfully!")),v(),y()}catch(e){console.error("Failed to save product:",e),alert("Failed to save product.")}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,s.jsx)("div",{className:"bg-white rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Product Details"}),(0,s.jsx)("button",{onClick:y,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(d.A,{size:24})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Product Name"}),(0,s.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Product Description"}),(0,s.jsx)("textarea",{value:S,onChange:e=>_(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800 min-h-[100px]"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Product Images"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Lorem Dolor Sit Amet, Lorem Ipsum"}),(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-md p-8 mb-4 flex flex-col items-center justify-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",multiple:!0,onChange:X,className:"hidden",id:"productImageInput"}),(0,s.jsxs)("label",{htmlFor:"productImageInput",className:"cursor-pointer flex flex-col items-center justify-center",children:[(0,s.jsx)(n.A,{className:"h-10 w-10 text-gray-400 mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Drag and Drop the Images here or ",(0,s.jsx)("span",{className:"text-blue-500",children:"Select file"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Formats Supported: PNG, JPG, JPEG, MP4 and MOV"})]})]}),U&&(0,s.jsx)("div",{className:"flex space-x-2 mb-1",children:M.map((e,t)=>(0,s.jsxs)("div",{className:"relative w-16 h-16 border rounded-md overflow-hidden",children:[(0,s.jsx)("img",{src:e||"https://i.pinimg.com/474x/15/20/b2/1520b25e509ef0c742551f7aa06a6356.jpg",alt:"Product ".concat(t+1),className:"w-full h-full object-cover"}),(0,s.jsx)("button",{onClick:()=>et(t),className:"absolute top-0 right-0 bg-white rounded-full",children:(0,s.jsx)(m.A,{className:"h-4 w-4 text-red-500"})})]},t))}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"First Image will be the cover"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Select the Product Category"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:O,onChange:e=>J(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800 appearance-none",children:[(0,s.jsx)("option",{value:"",children:"Select Category"}),b.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)(o.A,{className:"h-4 w-4 text-gray-500"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Select the Sub-Category(Optional)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:D,onChange:e=>E(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800 appearance-none",children:[(0,s.jsx)("option",{value:"",children:"Select Sub-Category"}),j.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)(o.A,{className:"h-4 w-4 text-gray-500"})})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Enter the Stock Qty."}),(0,s.jsx)("input",{type:"text",value:I,onChange:e=>F(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mr-4",children:"Product Visibility"}),(0,s.jsx)("div",{className:"relative inline-flex items-center cursor-pointer",children:(0,s.jsx)("div",{className:"w-10 h-5 rounded-full ".concat(L?"bg-orange-500":"bg-gray-200"),children:(0,s.jsx)("div",{className:"absolute w-3.5 h-3.5 bg-white rounded-full top-[3px] transition-transform ".concat(L?"translate-x-[22px]":"translate-x-[3px]"),onClick:()=>$(!L)})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Price"}),(0,s.jsx)("input",{type:"text",value:C,onChange:e=>k(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Slashed Price"}),(0,s.jsx)("input",{type:"text",value:P,onChange:e=>A(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"discount"}),(0,s.jsx)("input",{type:"text",value:H,onChange:e=>K(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Product Variants (optional)"}),(0,s.jsx)("div",{className:"flex flex-wrap space-x-4",children:B.map((e,t)=>(0,s.jsx)("div",{className:"flex flex-col items-center mb-4",children:(0,s.jsx)("input",{type:"text",value:e,onChange:e=>ea(t,e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800",placeholder:"Variant Name ".concat(t+1)})},t))}),(0,s.jsx)("button",{onClick:()=>{W([...B,""])},className:"text-blue-500 mt-2",children:"Add Variant"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Colors (optional)"}),(0,s.jsx)("div",{className:"flex flex-wrap space-x-4",children:Q.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[(0,s.jsx)("input",{type:"color",value:e,onChange:e=>es(t,e.target.value,"color"),className:"w-16 h-16 border rounded-md"}),(0,s.jsx)("input",{type:"text",value:Z[t]||"",onChange:e=>es(t,e.target.value,"name"),placeholder:"Color Description ".concat(t+1),className:"mt-2 text-center border rounded-md px-2 py-1 text-gray-800"})]},t))}),(0,s.jsx)("button",{onClick:()=>{T([...Q,"#000000"])},className:"text-blue-500 mt-2",children:"Add Color"})]})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)("button",{className:"w-full py-3 bg-orange-500 text-white rounded-md hover:bg-orange-600",onClick:f?el:ee,children:f?"Update Product":"Add Product"})})]})})})}var g=a(84503),h=a(68407),p=a(61253);function y(){let[e,t]=(0,l.useState)(""),[a,d]=(0,l.useState)("All"),[n,o]=(0,l.useState)(!1),[m,y]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[v,f]=(0,l.useState)([]),[N,w]=(0,l.useState)([]),[S,_]=(0,l.useState)([]),[C,k]=(0,l.useState)(1),P=async()=>{try{let e=x.$.getInstance(),t=await e.getAllCategories();f(t.map(e=>({id:e.id,name:e.name})))}catch(e){console.error("Failed to fetch categories:",e)}},A=async()=>{try{let e=x.$.getInstance(),t=await e.getAllSubCategories();w(t.map(e=>({id:e.id,name:e.name})))}catch(e){console.error("Failed to fetch subcategories:",e)}},I=async()=>{try{let e=x.$.getInstance(),t=[];for(let a of(0===v.length&&await P(),v)){let s=await e.getProductByCategoryId(a.id);s&&Array.isArray(s)?t=[...t,...s]:s&&t.push(s)}_(t)}catch(e){console.error("Failed to fetch products:",e)}},F=async e=>{try{let t=x.$.getInstance(),a=S.find(t=>t.id===e);_(t=>t.map(t=>t.id===e?{...t,is_active:!t.is_active}:t)),a&&await t.updateProduct(e,{is_active:!a.is_active})}catch(e){console.error("Failed to update product visibility:",e)}};(0,l.useEffect)(()=>{P(),A()},[]),(0,l.useEffect)(()=>{v.length>0&&N.length>0&&I()},[v,N]);let O=e=>{let t=v.find(t=>t.id===e);return t?t.name:"Unknown Category"},J=e=>{let t=N.find(t=>t.id===e);return t?t.name:"Unknown Subcategory"},D=[{id:"All",label:"All",count:S.length},...v.map(e=>({id:e.id,label:e.name,count:S.filter(t=>t.category_id===e.id).length}))],E="All"===a?S:S.filter(e=>e.category_id===a),[L,$]=(0,l.useState)(null),[M,G]=(0,l.useState)(null),U=e=>{G(e),o(!0),$(null)},z=async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{let t=x.$.getInstance();await t.deleteProduct(e),await I(),$(null)}catch(e){console.error("Failed to delete product:",e),alert("Failed to delete product")}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"All Products"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your inventory products"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>o(!0),className:"px-4 py-2 border rounded-md text-gray-800 flex gap-2 hover:bg-gray-50",children:[(0,s.jsx)(r.A,{}),"New Product"]}),(0,s.jsxs)("button",{onClick:()=>y(!0),className:"px-4 py-2 border rounded-md text-gray-800 flex gap-2 hover:bg-gray-50",children:[(0,s.jsx)(r.A,{}),"New Category"]}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"px-4 py-2 border rounded-md text-gray-800 flex gap-2 hover:bg-gray-50",children:[(0,s.jsx)(r.A,{}),"New sub category"]})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search for a Product name",className:"pl-10 text-gray-700 pr-4 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 w-full",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})}),(0,s.jsx)("div",{className:"border-b mb-4",children:(0,s.jsx)("div",{className:"flex space-x-6 overflow-x-auto pb-2",children:D.map(e=>(0,s.jsxs)("button",{className:"pb-2 px-1 font-medium text-sm whitespace-nowrap ".concat(a===e.id?"text-orange-500 border-b-2 border-orange-500":"text-gray-500 hover:text-gray-800"),onClick:()=>d(e.id),children:[e.label," ",(0,s.jsx)("span",{className:"ml-1 text-xs bg-gray-100 px-1.5 py-0.5 rounded-md",children:e.count})]},e.id))})}),(0,s.jsxs)("div",{className:"bg-white border rounded-md ",children:[(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 ",children:(()=>{let e=(C-1)*10;return E.slice(e,e+10)})().map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 flex-shrink-0 mr-3",children:(0,s.jsx)("img",{className:"h-10 w-10 rounded-md object-cover",src:(null==(t=e.image_url)?void 0:t[0])||"https://i.pinimg.com/474x/15/20/b2/1520b25e509ef0c742551f7aa06a6356.jpg",alt:e.name})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["#",e.id.substring(0,8)]})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:["â‚¹ ",e.price.toLocaleString()]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm text-gray-900",children:[e.availability_count," Uts."]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:O(e.category_id)}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:J(e.subcategory_id)})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("div",{className:"mr-4 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-sm text-gray-500",children:"Visibility"}),(0,s.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:e.is_active,onChange:()=>F(e.id)}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4    peer-focus:ring-orange-300 rounded-full peer    peer-checked:after:translate-x-full peer-checked:after:border-white    after:content-[''] after:absolute after:top-[2px] after:left-[2px]    after:bg-white after:border-gray-300 after:border after:rounded-full    after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)(p.W1,{as:"div",className:"relative Z-100",children:[(0,s.jsx)(p.IU,{className:"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})}),(0,s.jsx)(p.c,{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)(p.Dr,{children:t=>{let{active:a}=t;return(0,s.jsx)("button",{onClick:()=>U(e),className:"".concat(a?"bg-gray-100 text-gray-900":"text-gray-700"," block w-full px-4 py-2 text-left text-sm"),children:"Edit Product"})}}),(0,s.jsx)(p.Dr,{children:t=>{let{active:a}=t;return(0,s.jsx)("button",{onClick:()=>z(e.id),className:"".concat(a?"bg-gray-100 text-red-600":"text-red-600"," block w-full px-4 py-2 text-left text-sm"),children:"Delete Product"})}})]})})]})})]})})]},e.id)})})]}),(0,s.jsxs)("div",{className:"px-6 py-3 flex items-center justify-between border-t",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",Math.min(10*C,E.length)," of ",E.length," "]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700 mr-3",children:[" Page ",C," of ",Math.ceil(E.length/10)]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{className:"px-2 py-1 border rounded-l-md bg-gray-100 text-gray-600",children:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsx)("button",{className:"px-2 py-1 border-t border-b border-r rounded-r-md bg-gray-100 text-gray-600",onClick:()=>k(e=>Math.min(Math.ceil(E.length/10),e+1)),disabled:C===Math.ceil(E.length/10),children:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})]}),n&&(0,s.jsx)(u,{onClose:()=>{G(null),o(!1)},categories:v,subCategories:N,reload:I,editProduct:M}),m&&(0,s.jsx)(h.k,{onClose:()=>y(!1),reload:P}),b&&(0,s.jsx)(g.w,{onClose:()=>j(!1),reload:A})]})}},68407:(e,t,a)=>{"use strict";a.d(t,{k:()=>d});var s=a(95155),l=a(12115),r=a(54416),i=a(29869),c=a(34355);function d(e){let{onClose:t,reload:a}=e,[d,n]=(0,l.useState)(""),[o,x]=(0,l.useState)(""),[m,u]=(0,l.useState)(null),[g,h]=(0,l.useState)(!1),p=async()=>{if(!d||!m)return void alert("Please provide a category name and image.");h(!0);try{let e=c.$.getInstance();new FormData().append("file",m);let s=(await e.uploadFile(m)).url;await e.createNewCategory(d,[s]),a(),alert("Category added successfully!"),t()}catch(e){console.error("Failed to add category:",e),alert("Failed to add category.")}finally{h(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg w-full max-w-lg",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"New Category"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(r.A,{size:24})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Category Name"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>n(e.target.value),placeholder:"Enter category name",className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Category Image"}),(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-md p-4 flex flex-col items-center justify-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:e=>{var t;let a=(null==(t=e.target.files)?void 0:t[0])||null;u(a),a&&x(URL.createObjectURL(a))},className:"hidden",id:"categoryImageInput"}),(0,s.jsx)("label",{htmlFor:"categoryImageInput",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[o?(0,s.jsx)("img",{src:o,alt:"Preview",className:"h-30 w-auto mb-2"}):(0,s.jsx)(i.A,{className:"h-10 w-10 text-gray-400 mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Drag and Drop an image here or ",(0,s.jsx)("span",{className:"text-blue-500",children:"Select file"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Formats Supported: PNG, JPG, JPEG"})]})})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-3",children:[(0,s.jsx)("button",{className:"flex-1 py-2 border border-gray-300 rounded-md text-gray-800 hover:bg-gray-50",onClick:t,disabled:g,children:"Cancel"}),(0,s.jsx)("button",{className:"flex-1 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",onClick:p,disabled:g,children:g?"Adding...":"Add Category"})]})]})]})})})}},84503:(e,t,a)=>{"use strict";a.d(t,{w:()=>d});var s=a(95155),l=a(12115),r=a(54416),i=a(29869),c=a(34355);function d(e){let{onClose:t,reload:a}=e,[d,n]=(0,l.useState)(""),[o,x]=(0,l.useState)([]),[m,u]=(0,l.useState)(""),[g,h]=(0,l.useState)(!1),[p,y]=(0,l.useState)(null),[b,j]=(0,l.useState)([]),[v,f]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{try{let e=c.$.getInstance(),t=await e.getAllCategories();x(t)}catch(e){console.error("Failed to fetch categories:",e)}})()},[]);let N=async()=>{if(!d||!m)return void alert("Please provide a subcategory name and select a category.");h(!0);try{let e=c.$.getInstance(),s=[];if(p){let t=await e.uploadFile(p);s=[...b,t.url]}await e.createNewSubCategory(d,m,s),a(),alert("Subcategory added successfully!"),t()}catch(e){console.error("Failed to add subcategory:",e),alert("Failed to add subcategory.")}finally{h(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg w-full max-w-lg",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"New Sub Category"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(r.A,{size:24})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Category Name"}),(0,s.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),o.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Sub Category Name"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>n(e.target.value),placeholder:"Enter subcategory name",className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-md p-4 flex flex-col items-center justify-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:e=>{var t;let a=(null==(t=e.target.files)?void 0:t[0])||null;y(a),a&&f(URL.createObjectURL(a))},className:"hidden",id:"categoryImageInput"}),(0,s.jsx)("label",{htmlFor:"categoryImageInput",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[v?(0,s.jsx)("img",{src:v,alt:"Preview",className:"h-30 w-auto mb-2"}):(0,s.jsx)(i.A,{className:"h-10 w-10 text-gray-400 mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Drag and Drop an image here or ",(0,s.jsx)("span",{className:"text-blue-500",children:"Select file"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Formats Supported: PNG, JPG, JPEG"})]})})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-3",children:[(0,s.jsx)("button",{className:"flex-1 py-2 border border-gray-300 rounded-md text-gray-800 hover:bg-gray-50",onClick:t,disabled:g,children:"Cancel"}),(0,s.jsx)("button",{className:"flex-1 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",onClick:N,disabled:g,children:g?"Adding...":"Add Sub Category"})]})]})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[545,997,95,945,850,355,441,684,358],()=>t(31498)),_N_E=e.O()}]);